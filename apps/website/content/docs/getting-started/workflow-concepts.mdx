---
title: Workflow Concepts
description: Understanding specs, workflows, and how they work together
---

import { Callout } from 'fumadocs-ui/components/callout';

Learn the foundational concepts that power agentcmd's AI automation system.

## Specs: The Source of Truth

**Specs** are structured documents that describe what needs to be built. They're the single source of truth that drives AI implementation workflows.

### What's in a Spec

A spec contains:
- Feature/bug description
- Requirements and acceptance criteria
- Task breakdown with complexity estimates
- File structure and implementation approach
- Test strategy

### Where Specs Live

```
your-project/
└── .agent/specs/
    ├── index.json          # Registry of all specs
    ├── todo/               # Not started
    │   └── 251113152201-dark-mode/
    │       └── spec.md
    ├── in-progress/        # Currently being implemented
    └── done/               # Completed
```

The `index.json` file tracks all specs:

```json
{
  "specs": {
    "251113152201": {
      "path": "todo/251113152201-dark-mode/spec.md",
      "status": "draft",
      "spec_type": "feature"
    }
  }
}
```

### How to Generate Specs

There are three ways to create specs:

1. **From Planning Session** - AI explores your codebase in read-only mode, then generates a detailed spec
2. **Write It Inline** - You write markdown describing what you want, AI expands it into a full spec
3. **Manual Creation** - Write `spec.md` files directly in `.agent/specs/todo/`

<Callout type="info">
Planning sessions are the most thorough approach - the AI explores your codebase first, understanding context before generating the spec.
</Callout>

See [Planning Sessions](/docs/concepts/planning-sessions) and [Specs](/docs/concepts/specs) for details.

## Workflows: The Execution Engine

**Workflows** are TypeScript functions that orchestrate AI agents, git operations, and commands to implement specs.

### How Workflows Load

Workflows live in `.agent/workflows/definitions/` within each project folder. Workflows are unique to that project:

```
your-project/
└── .agent/workflows/
    └── definitions/
        ├── implement-feature.ts
        ├── fix-bug.ts
        └── resolve-issue.ts
```

Each workflow exports a `defineWorkflow()` function:

```typescript
export default defineWorkflow(
  {
    id: "implement-feature",
    trigger: "workflow/implement-feature",
    phases: ["plan", "implement", "review"],
  },
  async ({ event, step }) => {
    const { specId } = event.data;

    await step.agent("implement", {
      agent: "claude",
      prompt: `/cmd:implement-spec ${specId}`,
    });
  }
);
```

### How Specs + Workflows Work Together

1. You create a workflow run (from UI or API)
2. System loads the spec (existing or generates new one)
3. Workflow executes with spec as context
4. AI agents read the spec to understand what to build
5. Changes are committed, spec status updated

**The spec tells the AI what to build. The workflow defines how to build it.**

## Spec Types

The spec type determines what gets generated:

**Feature**
- New functionality or enhancements
- Generates: user stories, architecture, implementation phases

**Bug**
- Bug fixes with reproduction steps
- Generates: reproduction steps, root cause analysis, fix strategy

**Issue**
- Refactors, tech debt, general improvements
- Generates: problem statement, solution approach, impact analysis

## What Happens During a Run

Once you start a workflow run:

1. **Setup**
   - Creates git workspace (branch/worktree if configured)
   - Loads or generates spec
   - Triggers workflow via Inngest

2. **Execution**
   - Workflow runs through phases (plan → implement → review)
   - AI agents execute with spec context
   - Real-time updates via WebSocket

3. **Completion**
   - Commits changes to git
   - Creates PR (if configured)
   - Updates spec status in `index.json`
   - Returns to original workspace

## Why This Architecture

**Separation of concerns:**
- Specs describe **what** (requirements, acceptance criteria)
- Workflows define **how** (orchestration, steps, phases)
- This separation lets you reuse workflows across different specs

**Project-specific workflows:**
- Each project has unique build tools, testing patterns, conventions
- Custom workflows encode your project's specific needs
- Workflows are versioned with your code

**Durable execution:**
- Inngest provides retry logic and error handling
- Long-running AI operations can fail and resume
- No lost work if something goes wrong

## Next Steps

- [Running Workflows](/docs/getting-started/running-workflows) - Learn how to create and run workflows
- [Planning Sessions](/docs/concepts/planning-sessions) - Explore codebase before implementation
- [Specs](/docs/concepts/specs) - Deep dive into spec structure
- [Workflows](/docs/concepts/workflows) - Advanced workflow patterns
