---
title: Permission Modes
description: Configure agent autonomy levels to control what actions require approval
---

import { Callout } from 'fumadocs-ui/components/callout';
import { Tabs, Tab } from 'fumadocs-ui/components/tabs';

Permission modes control how much autonomy agents have when executing workflows. AgentCmd supports multiple permission levels, from fully automated to human-in-the-loop approval for every action.

## Overview

Permission modes determine when the agent must ask for approval before performing actions like file modifications, command execution, or API calls.

| Mode | Description | Use Case |
|------|-------------|----------|
| **Auto** | Agent executes all actions without approval | Trusted workflows, automated CI/CD |
| **Semi** | Agent asks approval for destructive actions | Development workflows, testing |
| **Manual** | Agent requires approval for every action | Exploratory tasks, learning |
| **Read-Only** | Agent can only read, never modify | Code analysis, documentation |

## Configuring Permission Modes

### Workflow-Level Configuration

Set the default permission mode for an entire workflow:

<Tabs items={['TypeScript', 'Inline']}>
<Tab value="TypeScript">
```typescript
import { defineWorkflow } from "agentcmd-workflows";

export const automatedWorkflow = defineWorkflow({
  id: "automated-deploy",
  name: "Automated Deployment",
  permissionMode: "auto", // No approval required
  phases: [
    // ... workflow phases
  ],
});
```
</Tab>
<Tab value="Inline">
```typescript
// Permission mode applied to entire workflow
const workflow = defineWorkflow({
  id: "review-workflow",
  name: "Code Review",
  permissionMode: "semi", // Approval for destructive actions
  phases: [
    // All steps inherit semi mode by default
  ],
});
```
</Tab>
</Tabs>

### Step-Level Override

Override permission mode for specific steps:

```typescript
import { defineWorkflow } from "agentcmd-workflows";

export const mixedWorkflow = defineWorkflow({
  id: "mixed-permissions",
  name: "Mixed Permission Workflow",
  permissionMode: "semi", // Default for most steps
  phases: [
    {
      name: "Analysis",
      steps: [
        {
          type: "agent",
          instruction: "Analyze codebase structure",
          permissionMode: "read-only", // Override: no modifications
        },
      ],
    },
    {
      name: "Implementation",
      steps: [
        {
          type: "agent",
          instruction: "Implement feature",
          permissionMode: "manual", // Override: approve every action
        },
      ],
    },
  ],
});
```

### CLI Runtime Override

Override permission mode when starting a workflow:

```bash
# Force auto mode (useful for CI/CD)
agentcmd start my-workflow --permission-mode auto

# Force manual mode (useful for debugging)
agentcmd start my-workflow --permission-mode manual
```

## Permission Mode Details

### Auto Mode

**Behavior**: Agent executes all actions immediately without waiting for approval.

**Best For**:
- Automated CI/CD pipelines
- Trusted, well-tested workflows
- Batch operations on non-production code

**Example**:
```typescript
export const autoDeployWorkflow = defineWorkflow({
  id: "auto-deploy",
  name: "Auto Deploy to Staging",
  permissionMode: "auto",
  phases: [
    {
      name: "Deploy",
      steps: [
        { type: "cli", command: "npm run build" },
        { type: "cli", command: "npm run test" },
        { type: "git", operation: "commit", message: "Deploy to staging" },
        { type: "git", operation: "push", remote: "origin", branch: "staging" },
      ],
    },
  ],
});
```

<Callout type="warn">
**Warning**: Auto mode skips all safety checks. Only use for trusted workflows in controlled environments.
</Callout>

### Semi Mode

**Behavior**: Agent asks for approval before destructive actions (delete, push, deploy) but proceeds automatically for safe operations (read, write, test).

**Best For**:
- Development workflows
- Feature implementation
- Most day-to-day tasks

**Approval Required For**:
- File deletions
- Git push operations
- Database migrations
- External API calls
- System command execution

**Example**:
```typescript
export const featureWorkflow = defineWorkflow({
  id: "implement-feature",
  name: "Implement Feature",
  permissionMode: "semi",
  phases: [
    {
      name: "Implementation",
      steps: [
        { type: "agent", instruction: "Read spec and plan" }, // Auto
        { type: "agent", instruction: "Implement feature" }, // Auto (writes)
        { type: "cli", command: "npm test" }, // Approval required
        { type: "git", operation: "commit" }, // Approval required
      ],
    },
  ],
});
```

### Manual Mode

**Behavior**: Agent asks for approval before **every** action, including reads.

**Best For**:
- Learning how workflows work
- Debugging workflow logic
- Exploratory tasks in unfamiliar codebases

**Example**:
```typescript
export const exploratoryWorkflow = defineWorkflow({
  id: "explore-codebase",
  name: "Explore New Codebase",
  permissionMode: "manual",
  phases: [
    {
      name: "Discovery",
      steps: [
        { type: "agent", instruction: "Analyze project structure" },
        { type: "agent", instruction: "Identify key patterns" },
        { type: "agent", instruction: "Generate architecture diagram" },
      ],
    },
  ],
});
```

### Read-Only Mode

**Behavior**: Agent can read files, execute read-only commands, but cannot modify anything.

**Best For**:
- Code analysis
- Documentation generation
- Security audits
- Learning from unfamiliar code

**Blocked Actions**:
- File writes/edits/deletes
- Git commits/pushes
- Command execution (except whitelisted read commands)
- Database writes

**Example**:
```typescript
export const analysisWorkflow = defineWorkflow({
  id: "analyze-code",
  name: "Code Analysis",
  permissionMode: "read-only",
  phases: [
    {
      name: "Analysis",
      steps: [
        {
          type: "agent",
          instruction: "Analyze code quality and suggest improvements",
        },
        {
          type: "artifact",
          name: "analysis-report",
          content: "Generate detailed analysis report",
        },
      ],
    },
  ],
});
```

## Dynamic Permission Escalation

Request permission escalation mid-workflow:

```typescript
export const smartWorkflow = defineWorkflow({
  id: "smart-permissions",
  name: "Smart Permission Workflow",
  permissionMode: "semi",
  phases: [
    {
      name: "Analysis",
      steps: [
        {
          type: "agent",
          instruction: "Analyze codebase",
          permissionMode: "read-only", // Start restrictive
        },
      ],
    },
    {
      name: "Implementation",
      steps: [
        {
          type: "agent",
          instruction: "Implement fixes for critical issues found",
          permissionMode: "manual", // Escalate for implementation
        },
      ],
    },
  ],
});
```

## Best Practices

### Start Restrictive

Begin with more restrictive modes and relax as you gain confidence:

```typescript
// First run: Manual mode to understand workflow
agentcmd start my-workflow --permission-mode manual

// After testing: Semi mode for daily use
agentcmd start my-workflow --permission-mode semi

// In CI/CD: Auto mode for trusted automation
agentcmd start my-workflow --permission-mode auto
```

### Use Read-Only for Analysis

Always use read-only mode when analyzing unfamiliar or production code:

```typescript
export const auditWorkflow = defineWorkflow({
  id: "security-audit",
  name: "Security Audit",
  permissionMode: "read-only", // Safe for production
  phases: [
    {
      name: "Audit",
      steps: [
        { type: "agent", instruction: "Scan for security vulnerabilities" },
        { type: "artifact", name: "audit-report", content: "Security findings" },
      ],
    },
  ],
});
```

### Combine Modes Strategically

Mix permission modes within workflows for optimal balance:

```typescript
export const balancedWorkflow = defineWorkflow({
  id: "balanced",
  name: "Balanced Workflow",
  permissionMode: "semi", // Default
  phases: [
    {
      name: "Research",
      steps: [
        {
          type: "agent",
          instruction: "Research best practices",
          permissionMode: "read-only", // No modifications during research
        },
      ],
    },
    {
      name: "Implementation",
      steps: [
        {
          type: "agent",
          instruction: "Implement solution",
          // Inherits "semi" - approval for dangerous actions
        },
      ],
    },
    {
      name: "Deployment",
      steps: [
        {
          type: "git",
          operation: "push",
          permissionMode: "manual", // Always approve deploys
        },
      ],
    },
  ],
});
```

## Related

- [Agent Steps](/reference/steps/agent) - Configure agent behavior
- [Error Handling](/guides/error-handling) - Handle permission denials
- [Session Resumption](/agents/session-resumption) - Resume after approval pauses
